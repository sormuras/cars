<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
</head>
<body>

  <script>
    var source = new EventSource('/state');
    source.onmessage = function(e) {
      document.getElementById("state").innerHTML = "data: " + e.data + " origin: " + e.origin;
      
      var canvas = document.getElementById("canvas");
      var context = canvas.getContext("2d");
      context.fillStyle = "#3C5884";
      context.fillRect(0, 0, canvas.width, canvas.height);
      context.fillStyle = "#C3B77A";
      context.fillRect(0, 0, Math.floor(Math.random() * canvas.width) + 1, Math.floor(Math.random() * canvas.height) + 1);
    };
  </script>
  
  <h1>Cars!</h1>
  
  <div id="state">-</div>
  
  <div align="center">
  <canvas id="canvas" width="200" height="100" style="border:1px solid #c3c3c3;">
    Your browser does not support the HTML5 canvas tag.
  </canvas>
  </div>

</body>
</html>
